<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <title>notpaper</title>
</head>
<body>
    <div class="main">
        <h1>store contact<br>into blockchain</h1>
        <textarea class="data" name="data" id="" cols="30" rows="3">Insert blockchain here</textarea><br>
        <button onclick="console.log(sendData());">send!</button><br><br><br>
        <div>If you need to check a contact click here: <a href="contactcheck.html">/check</a></div>
    </div>
</body>
</html>

<script>
    if(typeof waves !== 'undefined'){
        console.log('installed')
    }else{
        console.log('not installed')
    }
        
    
    function sendData() {
    const text = document.querySelector(".data").value;
    let data = text;
    let myDate = new Date();
    console.log(myDate);
    data = data.map(function(x) { return {"Chain": x, "Datetime": myDate, "type": "string"}} );
    const tx = {
        type: 12, // data transaction
        data: {
            data: data,
            fee: {
                "tokens": "0.001",
                "assetId": "WAVES"
            }
        }
    };
    WavesKeeper.signAndPublishTransaction(tx);
    return text;
    }
</script>
