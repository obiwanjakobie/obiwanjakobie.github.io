<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <title>notpaper</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="main">
        <h1>store <strong>certificado</strong><br>into blockchain</h1>
        <textarea class="data" name="data" id="" cols="30" rows="3">1 Sasha Ivanov</textarea><br>
        <button onclick="console.log(sendData());">send!</button><br><br><br>
        <div>certificado can be verified at <a href="check.html">/check</a></div>
    </div>
</body>
</html>

<script>
    if(typeof Waves !== 'undefined'){
        console.log('installed')
    }else{
        console.log('not installed')
    }
    
    function sendData() {
    const text = document.querySelector(".data").value;
    let data = text.split("\n");
    data = data.map(function(x) { return {"key": x.split(" ")[0], "value": x, "type": "string"}} );
    const tx = {
        type: 12, // data transaction
        data: {
            data: data,
            fee: {
                "tokens": "0.001",
                "assetId": "WAVES"
            }
        }
    };
    WavesKeeper.signAndPublishTransaction(tx);
    return text;
    }
</script>
