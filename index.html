<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="main">
        <h1>Store contact<br>into blockchain</h1>
        <div class="required" >Their SKYE address</div>
        <textarea class="data" name="data" id="" cols="20" rows="2">/textarea><br>
        <button class="button" onclick="console.log(sendData());">send!</button><br><br><br>
    </div>
</body>
</html>

<script>
    if(typeof waves !== 'undefined'){
        console.log('installed')
    }else{
        console.log('not installed')
    }
        
    
    function sendData() {
    const text = document.querySelector(".data").value;
    let data = text.split("\n");
    let myDate = new Date()
    console.log(myDate)
    data = data.map(function(x) { return {"key": x, "value": myDate, "type": "string"}} );
    const tx = {
        type: 12, // data transaction
        data: {
            data: data,
            fee: {
                "tokens": "0.001",
                "assetId": "WAVES"
            }
        }
    };
    WavesKeeper.signAndPublishTransaction(tx);
    return text;
    }
</script>
