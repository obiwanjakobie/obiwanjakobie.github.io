<!DOCTYPE html>
<html>
<body>
    <div class="main">
        <h1>verify <strong>certificado</strong><br>using blockchain</h1><br>
        <textarea class="data" name="data" id="" cols="30" rows="3">1 Sasha Ivanov</textarea><br>
        <button style="font-size: 18px" onclick="console.log(checkData());">check certificado!</button>
        <br>
        <div class="result">is the certificado real?</div>
        <div>check it in blockchain: <a target="_blank" style="color: blue; text-decoration: none" href="https://wavesexplorer.com/testnet/address/3N29PDa7Qa8Cc1nJSMnVhpc8Map6Z3Vmsgi/data">
            https://wavesexplorer.com/testnet/address/<br>
            3N29PDa7Qa8Cc1nJSMnVhpc8Map6Z3Vmsgi/data
        </a></div>
        <br><br>
        <div>
            add new <strong>certificado</strong> at <a href=".">main page</a><br>
            (for admins only)
        </div>
    </div>
</body>
</html>
<script>
    function checkData() {
    const text = document.querySelector(".data").value.split("\n")[0];
    const certificateId = text.split(" ")[0];

    const xhr = new XMLHttpRequest();
    xhr.open("GET", "https://testnodes.wavesnodes.com/addresses/data/3N29PDa7Qa8Cc1nJSMnVhpc8Map6Z3Vmsgi/"+certificateId);
    xhr.onload  = function() {
        const doesExist = JSON.parse(xhr.response).value === text;
        document.querySelector(".result").innerHTML = doesExist ? "<span style='color: green'><strong>certificado</strong> exists</span>" : "<span style='color: red'><strong>certificado</strong> does not exist</span>";
        return doesExist;
    };
    xhr.send();
}
</script>